<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>BlueChat V2</title>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Lexend+Exa:wght@700&display=swap');
        body { margin: 0; font-family: 'Segoe UI', sans-serif; overflow: hidden; transition: background 2s; color: white; }
        .day-bg { background: linear-gradient(to bottom, #4facfe 0%, #00f2fe 100%); } /* æœãƒ»æ˜¼ã®ç¾ã—ã„é¢¨æ™¯ã‚’ã‚¤ãƒ¡ãƒ¼ã‚¸ */
        .night-bg { background: radial-gradient(ellipse at bottom, #1B2735 0%, #090A0F 100%); } /* æ˜Ÿç©ºã®ã‚¤ãƒ¡ãƒ¼ã‚¸ */
        .hidden { display: none !important; }
        
        /* ã‚¿ã‚¤ãƒˆãƒ«ç”»é¢ */
        .v-tag { position: absolute; top: 20px; right: 20px; font-size: 14px; opacity: 0.7; }
        .title-text { font-family: 'Lexend Exa', sans-serif; font-size: 80px; text-shadow: 0 10px 30px rgba(0,0,0,0.3); }
        .btn-start { padding: 15px 50px; font-size: 22px; border-radius: 40px; border: none; background: white; color: #1976d2; font-weight: bold; cursor: pointer; transition: 0.3s; }
        
        /* å…±é€šãƒ‘ãƒãƒ« */
        .panel { background: rgba(255, 255, 255, 0.15); backdrop-filter: blur(15px); padding: 40px; border-radius: 25px; text-align: center; width: 350px; }
        input { width: 90%; padding: 12px; margin: 10px 0; border-radius: 10px; border: none; }
        
        /* é€šè©±ç”»é¢ (Google Meeté¢¨) */
        #screen-call { width: 100vw; height: 100vh; background: #202124; display: flex; flex-direction: column; }
        .call-header { height: 50px; padding: 0 20px; display: flex; align-items: center; background: #000; font-weight: bold; }
        .video-container { flex: 1; display: flex; position: relative; background: #3c4043; }
        #main-video { width: 100%; height: 100%; object-fit: cover; }
        .info-overlay { position: absolute; bottom: 100px; left: 20px; font-size: 14px; text-shadow: 1px 1px 2px black; }
        .control-bar { height: 80px; display: flex; justify-content: center; align-items: center; gap: 15px; }
        .icon-btn { width: 50px; height: 50px; border-radius: 50%; border: none; background: #3c4043; color: white; cursor: pointer; font-size: 20px; }
        .icon-btn.red { background: #ea4335; }
        
        /* ãƒãƒ£ãƒƒãƒˆã‚µã‚¤ãƒ‰ãƒãƒ¼ */
        .sidebar { position: fixed; right: 0; top: 0; width: 300px; height: 100%; background: white; color: black; transition: 0.3s; transform: translateX(300px); }
        .sidebar.open { transform: translateX(0); }
    </style>
</head>
<body class="day-bg">
    <div id="v-tag" class="v-tag">V2</div>

    <div id="screen-title" style="display: flex; flex-direction: column; align-items: center; justify-content: center; height: 100vh;">
        <div class="title-text">Blue Chat</div>
        <button class="btn-start" onclick="startCaptcha()">ã‚¹ã‚¿ãƒ¼ãƒˆ</button>
    </div>

    <div id="screen-captcha" class="hidden" style="display: flex; align-items: center; justify-content: center; height: 100vh;">
        <div class="panel">
            <h3>ğŸ¤– ãƒ­ãƒœãƒƒãƒˆã§ã¯ã‚ã‚Šã¾ã›ã‚“ã‹ï¼Ÿ</h3>
            <p id="captcha-q" style="font-size: 24px; font-weight: bold;"></p>
            <input type="number" id="captcha-a" placeholder="ç­”ãˆã‚’å…¥åŠ›">
            <button class="btn-start" style="font-size: 16px; margin-top:10px;" onclick="checkCaptcha()">ç¢ºèª</button>
        </div>
    </div>

    <div id="screen-login" class="hidden" style="display: flex; align-items: center; justify-content: center; height: 100vh;">
        <div class="panel">
            <button style="width:100%; padding:10px; margin-bottom:10px; border-radius:5px; border:none; cursor:pointer; background:white;">Googleã§ãƒ­ã‚°ã‚¤ãƒ³</button>
            <button style="width:100%; padding:10px; margin-bottom:20px; border-radius:5px; border:none; cursor:pointer; background:#0078d4; color:white;">Microsoftã§ãƒ­ã‚°ã‚¤ãƒ³</button>
            <hr>
            <input type="text" id="login-id" placeholder="BlueChat ID">
            <input type="password" id="login-pw" placeholder="ãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰">
            <button class="btn-start" style="width:100%; font-size:16px;" onclick="doLogin()">ãƒ­ã‚°ã‚¤ãƒ³</button>
            <p><a href="#" onclick="showScreen('screen-register-1')" style="color:white; font-size:12px;">ãƒ–ãƒ«ãƒ¼ãƒãƒ£ãƒƒãƒˆã‚¢ã‚«ã‚¦ãƒ³ãƒˆã‚’ä½œæˆ</a></p>
        </div>
    </div>

    <div id="screen-register-1" class="hidden" style="display: flex; align-items: center; justify-content: center; height: 100vh;">
        <div class="panel">
            <h3>ã‚¢ã‚«ã‚¦ãƒ³ãƒˆä½œæˆ (1/2)</h3>
            <input type="text" id="reg-id" placeholder="ID (è‹±æ•°.-ã®ã¿)">
            <input type="password" id="reg-pw" placeholder="ãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰ (è‹±æ•°6æ–‡å­—ä»¥ä¸Š)">
            <button class="btn-start" style="width:100%; font-size:16px;" onclick="checkReg1()">æ¬¡ã¸</button>
        </div>
    </div>

    <div id="screen-register-2" class="hidden" style="display: flex; align-items: center; justify-content: center; height: 100vh;">
        <div class="panel">
            <h3>ã‚¢ã‚«ã‚¦ãƒ³ãƒˆä½œæˆ (2/2)</h3>
            <input type="text" id="reg-nick" placeholder="ãƒ‹ãƒƒã‚¯ãƒãƒ¼ãƒ ">
            <p style="font-size: 10px; color: #ffcccc;">â€»æœ¬åã‚’ä½¿ç”¨ã—ãªã„ã§ãã ã•ã„</p>
            <button class="btn-start" style="width:100%; font-size:16px;" onclick="doRegister()">ã‚¢ã‚«ã‚¦ãƒ³ãƒˆä½œæˆ</button>
        </div>
    </div>

    <div id="screen-call" class="hidden">
        <div class="call-header">Blue Chat</div>
        <div class="video-container">
            <video id="main-video" autoplay playsinline muted></video>
            <div class="info-overlay">
                <span id="display-time">00:00</span> | <span id="display-room-id">ID: ------</span>
            </div>
        </div>
        <div class="control-bar">
            <button class="icon-btn">ğŸ¤</button>
            <button class="icon-btn">ğŸ“·</button>
            <button class="icon-btn">ğŸ“¤</button>
            <button class="icon-btn">âœ‹</button>
            <button class="icon-btn" onclick="toggleChat()">ğŸ’¬</button>
            <button class="icon-btn" id="btn-admin">âš™ï¸</button>
            <button class="icon-btn">ğŸ‘¥</button>
            <button class="icon-btn red">ğŸ“</button>
        </div>
        <div id="sidebar-chat" class="sidebar">
            <div style="padding: 20px;">
                <h4>ãƒãƒ£ãƒƒãƒˆ</h4>
                <div id="chat-box" style="height: 400px; overflow-y: auto; border: 1px solid #ddd;"></div>
                <input type="text" id="chat-input" placeholder="ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã‚’å…¥åŠ› (@ã§ãƒ¡ãƒ³ã‚·ãƒ§ãƒ³)" style="width:80%; color:black;">
                <button onclick="sendChat()">é€ä¿¡</button>
            </div>
        </div>
    </div>

    <script src="/socket.io/socket.io.js"></script>
    <script src="client.js"></script>
</body>
</html>
